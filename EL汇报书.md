# TodoList 项目技术文档

## 项目概述

TodoList 是一款基于 Tauri 框架开发的跨平台任务管理应用，集成了人工智能功能，支持多种视图模式和云端同步。本项目采用现代化的技术栈，为用户提供高效、灵活的任务管理体验。

### 项目信息

- **项目名称**: TodoList
- **开发团队**: 嵇煜人（后端）、孙一鸣（前端）
- **技术栈**: Vue.js, Rust, Tauri, TypeScript
- **跨平台支持**: Windows, macOS, Linux, Android

### 参考资源

- [clash-nyanpasu](https://github.com/libnyanpasu/clash-nyanpasu) - Tauri 框架参考项目
- [Vue.js 官方文档](https://cn.vuejs.org/)
- [Rust 社区文档](https://docs.rs/)
- Stack Overflow 社区
- Claude AI 辅助开发

## 快速开始

### 预编译版本

访问我们的 [GitHub Releases](https://github.com/Aromatic05/ToDoPulse/releases) 页面下载适用于不同平台的预编译版本。

### 开发环境搭建

#### 环境要求

- Node.js 环境
- Rust 开发环境
- Tauri CLI 工具
- LinuxDeploy（构建 AppImage 格式需要）

#### 安装依赖

```bash
npm install
```

#### 开发模式运行

```bash
npm run tauri dev
```

#### 构建生产版本

```bash
npm run tauri release
```

> **注意**: 构建过程可能需要较长时间，请耐心等待。

## 功能特性

### 核心功能

#### 任务管理

- **数据持久化**: 本地数据安全存储
- **分类管理**: 支持任务分类组织
- **多格式支持**: 支持 Markdown 格式和图片资源嵌入
![[20250530_210218.png]]
#### 智能化功能

- **AI 标签生成**: 基于任务内容自动生成相关标签
- **智能分类**: 辅助任务组织和管理

#### 多视图模式

- **日历视图**: 基于时间的可视化任务展示
![[20250530_205857-1.png]]
- **时间线视图**: 按时间顺序排列的任务流![[20250530_210317.png]]
- **列表视图**: 传统的列表式任务管理
- **标签视图**: 基于标签的任务分组显示
![[20250530_210237.png]]
#### 数据管理

- **多格式导出**: 支持 ICS、JSON、Markdown 三种导出格式
- **云端同步**: 支持 WebDAV 协议的网盘同步
- **数据备份**: 保障数据安全性

#### 用户体验

- **通知系统**: 后台运行，定时提醒功能
- **个性化主题**: 支持自定义主题配置![[20250530_210251.png]]
- **跨平台一致性**: 统一的用户界面和操作体验

## 系统架构

### 项目结构

```
todolist/
├── Cargo.lock              # Rust 依赖锁定文件
├── Cargo.toml              # Rust 项目配置
├── dist/                   # 构建输出目录
├── images/                 # 应用图标资源
├── index.html              # 应用入口页面
├── node_modules/           # Node.js 依赖
├── package.json            # Node.js 项目配置
├── public/                 # 静态资源目录
├── src/                    # 前端源代码
├── src-tauri/              # 后端源代码
├── target/                 # Rust 编译输出
└── *.config.*              # 各类配置文件
```

### 前端架构 (src/)

```
src/
├── App.vue                 # 根组件
├── assets/                 # 静态资源
├── components/             # Vue 组件
├── layout/                 # 布局组件
├── main.ts                 # 应用入口
├── plugins/                # 插件配置
├── services/               # 服务层
├── stores/                 # 状态管理
├── styles/                 # 样式文件
└── utils/                  # 工具函数
```

### 后端架构 (src-tauri/src/)

```
src-tauri/src/
├── entity/                 # 数据实体定义
├── error.rs                # 错误处理
├── filter/                 # 数据过滤逻辑
├── function/               # 业务逻辑函数
├── init.rs                 # 初始化模块
├── lib.rs                  # 库入口
├── main.rs                 # 应用入口
├── test/                   # 测试模块
└── utils/                  # 工具函数
```

### 架构设计原则

- **分层架构**: 明确的数据层、逻辑层、表现层分离
- **模块化设计**: 功能模块独立，便于维护和扩展
- **跨平台兼容**: 统一的 API 接口，适配多平台特性

## 技术实现

### 前端技术栈

- **Vue.js**: 响应式用户界面框架
- **TypeScript**: 类型安全的 JavaScript 超集
- **Vite**: 快速的前端构建工具

### 后端技术栈

- **Rust**: 系统级编程语言，提供内存安全和高性能
- **Tauri**: 跨平台桌面应用开发框架
- **Redb**: 轻量级键值数据库

### 测试策略

项目包含完整的后端测试套件，使用以下命令运行测试：

```bash
cargo test
```

## 开发挑战与解决方案

### 并发控制问题

**问题描述**: 后端多个互斥锁导致前端调用时出现死锁，程序响应停止。

**解决方案**:

- 系统性排查后端函数的锁机制
- 优化锁的获取和释放顺序
- 实施细粒度的锁控制策略

### 前后端协作问题

**问题描述**: 项目初期缺乏明确的接口规范，导致数据结构和函数签名不一致。

**解决方案**:

- 建立统一的数据接口规范
- 实现兼容性数据结构
- 建立双方代码审查机制
- 完善文档和类型定义

## 项目优化与展望

### 已识别的改进点

1. **AI 功能优化**
    
    - 当前问题: AI 标签生成影响任务创建速度
    - 优化方案: 实现异步处理，先创建任务，后台执行 AI 标签生成
2. **用户界面优化**
    
    - 当前状态: 部分 UI 组件制作相对粗糙
    - 改进计划: 重构关键界面组件，提升用户体验
3. **AI 集成策略**
    
    - 成本控制: 优化 API 调用频率和策略
    - 功能增强: 探索更高效的提示词工程
    - 工作流优化: 设计更智能的 AI 辅助流程

### 未来发展方向

- **功能扩展**: 增加更多智能化任务管理功能
- **性能优化**: 进一步提升应用响应速度和资源利用效率
- **用户体验**: 持续改进界面设计和交互流程
- **平台支持**: 扩展更多平台和设备支持

## 总结

TodoList 项目成功实现了一个功能丰富、跨平台的智能任务管理应用。通过现代化的技术栈和合理的架构设计，为用户提供了高效的任务管理体验。项目在开发过程中积累了宝贵的跨平台开发经验，为后续项目奠定了坚实基础。